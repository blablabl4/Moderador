<!DOCTYPE html>
<html>

<body>
    <img id="source" src="static/logo.png" style="display:none">
    <canvas id="canvas" width="256" height="256"></canvas>
    <script>
        window.onload = function () {
            const canvas = document.getElementById('canvas');
            const ctx = canvas.getContext('2d');
            const img = document.getElementById('source');

            // Draw circle mask
            ctx.beginPath();
            ctx.arc(128, 128, 128, 0, Math.PI * 2, true);
            ctx.closePath();
            ctx.clip();

            // Draw image
            ctx.drawImage(img, 0, 0, 256, 256);

            // Output base64
            console.log("BASE64_START");
            console.log(canvas.toDataURL('image/png'));
            console.log("BASE64_END");
        };
    </script>
</body>

</html>